<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="青山几重">
  
  
  
  <link rel="prev" href="/2021/%E9%94%AE%E7%9B%98%E6%8C%89%E9%94%AE%E4%BA%8B%E4%BB%B6%E8%AF%A6%E8%A7%A3/" />
  <link rel="next" href="/2021/%E9%87%8D%E7%BD%AEcss%E6%A0%B7%E5%BC%8F/" />
  <link rel="canonical" href="/2021/%E9%A1%B5%E9%9D%A2%E6%BB%9A%E5%8A%A8/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           页面滚动 | 青山几重的博客
       
  </title>
  <meta name="title" content="页面滚动 | 青山几重的博客">
    

  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": ""
    },
    "articleSection" : "posts",
    "name" : "页面滚动",
    "headline" : "页面滚动",
    "description" : "scrollingElement 该对象可以非常兼容地获取 scrollTop、scrollHeight 等属性，在移动端跟 PC 端都屡试不爽document.scrollingE",
    "inLanguage" : "zh-cn",
    "author" : "青山几重",
    "creator" : "青山几重",
    "publisher": "青山几重",
    "accountablePerson" : "青山几重",
    "copyrightHolder" : "青山几重",
    "copyrightYear" : "2021",
    "datePublished": "2021-03-12 13:42:51 \u002b0800 CST",
    "dateModified" : "2021-03-12 13:42:51 \u002b0800 CST",
    "url" : "\/2021\/%E9%A1%B5%E9%9D%A2%E6%BB%9A%E5%8A%A8\/",
    "wordCount" : "1431",
    "keywords" : [ "js","css", "青山几重的博客"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    
    <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="">青山几重的博客</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
    <div class="top-scroll-bar"></div>
    
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="">青山几重的博客</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>

          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">页面滚动</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="" rel="author">青山几重</a> with ♥
                <span class="post-time">
                on <time datetime=2021-03-12 itemprop="datePublished">March 12, 2021</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="/categories/%E5%89%8D%E7%AB%AF/"> 前端 </a>
                        
                </span>
            <span class="post-word-count">, 1431 words</span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        

          
          
          

          
          
          

          <ul>
<li>
<p>scrollingElement</p>
<p>该对象可以非常兼容地获取 scrollTop、scrollHeight 等属性，在移动端跟 PC 端都屡试不爽<code>document.scrollingElement.scrollHeight</code>标准模式返回 documentElement，怪异模式返回 body</p>
</li>
<li>
<p>滚动到底部</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">window.<span style="color:#a6e22e">scrollTo</span>({
  <span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#a6e22e">top</span><span style="color:#f92672">:</span> document.<span style="color:#a6e22e">scrollingElement</span>.<span style="color:#a6e22e">scrollHeight</span>
});
</code></pre></div><ul>
<li>判断浏览器已滚动到底部</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">window<span style="color:#f92672">.</span><span style="color:#a6e22e">addEventListener</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;scroll&#34;</span><span style="color:#f92672">,</span> <span style="color:#f92672">()</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">const</span> <span style="color:#f92672">{</span> scrollTop<span style="color:#f92672">,</span> scrollHeight<span style="color:#f92672">,</span> clientHeight <span style="color:#f92672">}</span> <span style="color:#f92672">=</span> document<span style="color:#f92672">.</span><span style="color:#a6e22e">scrollingElement</span><span style="color:#f92672">;</span>
  <span style="color:#75715e">// 当前滚动高度 + 视口高度 &gt;= 文档总高度
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>scrollTop <span style="color:#f92672">+</span> clientHeight <span style="color:#f92672">&gt;=</span> scrollHeight<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    console<span style="color:#f92672">.</span><span style="color:#a6e22e">log</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;已到达底部&#34;</span><span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">});</span>
</code></pre></div><ul>
<li>ios设备局部滚动不顺畅</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">box</span> {
  <span style="color:#66d9ef">-webkit-</span>overflow-scrolling: touch;
}
</code></pre></div><ul>
<li>
<p>滚动传播</p>
<p>指有多个滚动区域，当一个滚动区域滚动完之后，继续滚动会传播到到父区域继续滚动的行为</p>
</li>
</ul>
<pre><code>.box {
  overscroll-behavior: contain; // 阻止滚动传播
}
</code></pre><ul>
<li>滚动结束后强制滚动到指定元素</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">ul</span> {
  <span style="color:#66d9ef">scroll-snap-type</span>: x <span style="color:#66d9ef">mandatory</span>;
  <span style="color:#960050;background-color:#1e0010">li</span> <span style="color:#960050;background-color:#1e0010">{</span>
    scroll-snap-align: <span style="color:#66d9ef">start</span>;
  }
<span style="color:#960050;background-color:#1e0010">}</span>
</code></pre></div><ul>
<li>移动端适配</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">html</span> {
  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">13.3333</span><span style="color:#66d9ef">vw</span>;
}
</code></pre></div><ul>
<li>
<p>input的placeholder样式</p>
<p><code>input</code>输入框的<code>placeholder</code>在移动端并非垂直居中 尤其不要尝试用<code>height === line-height</code>(这个会出现光标问题) 此时给<code>input</code> 添加属性<code>line-height:normal</code>可解决</p>
</li>
<li>
<p>滑动穿透</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#960050;background-color:#1e0010">“</span>.<span style="color:#a6e22e">mask</span><span style="color:#e6db74">&#34;).addEventListener(&#34;</span><span style="color:#a6e22e">touchmove</span><span style="color:#960050;background-color:#1e0010">&#34;</span>, <span style="color:#a6e22e">event</span> =&gt; {
  <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">preventDefault</span>();
})
<span style="color:#a6e22e">在vue中也可以直接使用</span><span style="color:#e6db74">`@touchumove.prevent`</span>
</code></pre></div><ul>
<li>ios上input失焦后未回弹</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">focus</span>() {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">scrollingElement</span>.<span style="color:#a6e22e">scrollTop</span>
},
<span style="color:#a6e22e">blur</span>() {
  document.<span style="color:#a6e22e">scrollingElement</span>.<span style="color:#a6e22e">scrollTo</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">scrollTop</span>)
}
</code></pre></div><ul>
<li>网页忽略自动识别</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!— 忽略浏览器自动识别数字为电话号码 —&gt;</span>
&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;format-detection&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;telephone=no&#34;</span> /&gt;
<span style="color:#75715e">&lt;!-- 忽略浏览器自动识别邮箱账号 --&gt;</span>
&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;format-detection&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email=no&#34;</span> /&gt;
</code></pre></div><ul>
<li>弹出数字键盘</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!— 有”#&#34; &#34;*&#34;符”输入 ——&gt;</span>
&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tel&#34;</span> <span style="color:#a6e22e">novalidate</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;novalidate&#34;</span> <span style="color:#a6e22e">pattern</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[0-9]*&#34;</span> /&gt;
type=&#34;tel&#34;, 是 HTML5 的一个属性, 表示输入框类型为电话号码, 在 Android 和 IOS上表现差不多, 都会有数字键盘, 但是也会有字母, 略显多余
pattern=&#34;[0-9]&#34;, pattern 用于验证表单输入的内容, 通常 HTML5 的 type 属性, 比如email、tel、number、data 类、url 等, 已经自带了简单的数据格式验证功能了, 加上pattern 后, 前端部分的验证更加简单高效了。IOS 中, 只有 [0-9]\*才可以调起九宫格数字键盘, \d 无效, Android 4.4以下（包括X5内核）, 两者都调起数字键盘
novalidate=&#34;novalidate&#34;, novalidate属性规定当提交表单时不对其进行验证, 由于 pattern校验兼容性不好, 可以不让其校验, 只让其唤起纯数字键盘, 校验工作由 js 去做
<span style="color:#75715e">&lt;!— 纯数字 --&gt;</span>
&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">pattern</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;“\d*”&#34;</span> /&gt;
</code></pre></div><ul>
<li>解决伪类失效</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">body</span> <span style="color:#a6e22e">ontouchstart</span> &gt;&lt;/<span style="color:#f92672">body</span>&gt;
</code></pre></div><ul>
<li>网页状态栏背景色</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">apple-mobile-web-app-capable是设置Web应用是否以全屏模式运行;语法:
&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;apple-mobile-web-app-capable&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;yes&#34;</span> /&gt; //content设置为yes
Web应用会以全屏模式
&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;apple-mobile-web-app-status-bar-style&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;black&#34;</span> /&gt;
</code></pre></div><ul>
<li>ios键盘默认首字母大写解决方案</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">autocapitalize</span><span style="color:#f92672">=</span><span style="color:#e6db74">“off&#34;</span> <span style="color:#a6e22e">autocorrect</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;off&#34;</span> /&gt;
</code></pre></div><ul>
<li>
<p>ios上使用input但弹出自定义键盘</p>
<p>input 的 readonly属性 在 ios 下 获取焦点时仍会弹出虚拟键盘 此时使用unselectable=&ldquo;on&rdquo; onfocus=&ldquo;this.blur()&ldquo;解决</p>
</li>
<li>
<p>安卓上弹出的键盘覆盖文本框</p>
<p>安卓微信 H5 弹出软键盘后挡住 input 输入框 也可以在文本框获取焦点时不判断机型 直接加延时</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">focus</span>(){
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">u</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">userAgent</span>, <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">appVersion</span>;
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">isAndroid</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;Android&#39;</span>) <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">u</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;Linux&#39;</span>) <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
  <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">isAndroid</span>){
    <span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() {
      document.<span style="color:#a6e22e">activeElement</span>.<span style="color:#a6e22e">scrollIntoViewIfNeeded</span>();
      document.<span style="color:#a6e22e">activeElement</span>.<span style="color:#a6e22e">scrollIntoView</span>();
    }, <span style="color:#ae81ff">500</span>);
  }
}
</code></pre></div><ul>
<li>
<p>锚点跳转</p>
<p>scrollIntoView()中可以传入Boolean类型的参数，默认是true，就是滚动定位到浏览器的顶部，如果传入false，就是滚动定位到浏览器的底部</p>
</li>
</ul>
<pre><code>document.getElementById(IdSlector).scrollIntoView();
</code></pre><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView">scrollIntoView文档</a></p>

    </div>

    <div class="post-copyright">
            
            <p class="copyright-item">
                <span>Author:</span>
                <span>青山几重 </span>
                </p>
            

            
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=/2021/%E9%A1%B5%E9%9D%A2%E6%BB%9A%E5%8A%A8/>/2021/%E9%A1%B5%E9%9D%A2%E6%BB%9A%E5%8A%A8/</span>
            </p>
            
            
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>


    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="tags/js/">
                    #js</a></span>
            
            <span class="tag"><a href="tags/css/">
                    #css</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> ·
                <span><a href="">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="/2021/%E9%94%AE%E7%9B%98%E6%8C%89%E9%94%AE%E4%BA%8B%E4%BB%B6%E8%AF%A6%E8%A7%A3/" class="prev" rel="prev" title="键盘按键事件详解"><i class="iconfont icon-left"></i>&nbsp;键盘按键事件详解</a>
        
        
        <a href="/2021/%E9%87%8D%E7%BD%AEcss%E6%A0%B7%E5%BC%8F/" class="next" rel="next" title="重置css样式">重置css样式&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
        
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: '8a2eee0576ce107588f1',
    clientSecret: '37209f0bb49e03718d307a6d6f8a4f1c37a33d2c',
    repo: 'https:\/\/wangjun521.github.io',
    owner: 'wangjun521',
    admin: ['wangjun521'],
    id: location.pathname, 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2021</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="">青山几重</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>













    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    




     </div>
  </body>
</html>
